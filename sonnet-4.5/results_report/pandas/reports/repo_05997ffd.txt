Test 1: Basic mutation with namespace
Before: {'x': 'value', 'y': 42}
After:  {'x': 'value', 'y': 42, '__template_name__': None, 'z': 100}
Result: value
Added keys: {'__template_name__', 'z'}

Test 2: Mutation without namespace
Before: {'a': 1, 'b': 2}
After:  {'a': 1, 'b': 2, '__template_name__': None}
Result: 1 2
Added keys: {'__template_name__'}
