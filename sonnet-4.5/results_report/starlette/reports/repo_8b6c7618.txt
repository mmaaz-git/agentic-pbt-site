Testing IPv6 host header: [::1]
==================================================
Host header value: [::1]
What split(':')[0] extracts: [
Expected extraction: [::1]
Does '[' match '[::1]'? False

Testing actual middleware behavior:
--------------------------------------------------
Response status code: 400
Response content: Invalid host header

Testing with IPv6 address with port: [::1]:8080
--------------------------------------------------
Host header value: [::1]:8080
What split(':')[0] extracts: [
Expected extraction: [::1]

Testing with full IPv6 address: [2001:db8::1]
--------------------------------------------------
Host header value: [2001:db8::1]
What split(':')[0] extracts: [2001
Expected extraction: [2001:db8::1]

For comparison, testing IPv4 with port (works correctly):
--------------------------------------------------
Host header value: 127.0.0.1:8080
What split(':')[0] extracts: 127.0.0.1
Expected extraction: 127.0.0.1
Correctly extracted? True
Exit code: 0
