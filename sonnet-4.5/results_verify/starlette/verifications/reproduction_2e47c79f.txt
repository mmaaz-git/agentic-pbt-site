# Bug Reproduction Report

## Bug Summary
The bug report claims that `starlette.middleware.errors.ServerErrorMiddleware.format_line` generates invalid HTML by using `&nbsp` instead of `&nbsp;` (missing semicolon) when replacing spaces in error traceback lines.

## Reproduction Steps

1. Created test file with both the property-based test and specific reproduction case from the bug report.

2. Ran the reproduction test:
   - The method `format_line(0, "hello world", 1, 0)` produces output containing `&nbsp` without a semicolon
   - Actual output: `<p class="center-line"><span class="frame-line center-line">\n<span class="lineno">1.</span> hello&nbspworld</span></p>`

3. Examined source code at `/home/npc/pbt/agentic-pbt/envs/starlette_env/lib/python3.13/site-packages/starlette/middleware/errors.py`:
   - Line 191 contains: `"line": html.escape(line).replace(" ", "&nbsp")`
   - This confirms the bug - the code is replacing spaces with `&nbsp` without the trailing semicolon

## Effect of the Bug

The bug produces technically invalid HTML. When spaces in error traceback lines are replaced with the HTML non-breaking space entity, they are encoded as `&nbsp` instead of the correct `&nbsp;`.

While most modern web browsers are lenient and will still render `&nbsp` correctly (treating it as a non-breaking space), this is:
1. Invalid according to HTML specifications
2. May fail HTML validation
3. Could cause issues with strict HTML parsers
4. May cause problems with accessibility tools or screen readers
5. Could fail in non-browser HTML consumers

## Verification

The bug is 100% reproducible. Every space character in the input line gets replaced with the invalid `&nbsp` entity (missing semicolon). The property-based test confirms this happens for any text containing spaces.