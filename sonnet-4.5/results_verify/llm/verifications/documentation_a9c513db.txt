## Documentation Review for truncate_string

After searching for documentation on the `truncate_string` function in the llm.utils module, I found:

1. **Function Docstring**: The only documentation available is the docstring in the source code itself (utils.py lines 445-456):
   - States: "Truncate a string to a maximum length, with options to normalize whitespace and keep both start and end."
   - Parameters documented:
     - text: The string to truncate
     - max_length: Maximum length of the result string
     - normalize_whitespace: If True, replace all whitespace with a single space
     - keep_end: If True, keep both beginning and end of string
   - Returns: Truncated string

2. **No External Documentation**:
   - No external documentation was found in the llm package documentation at llm.datasette.io
   - No specific documentation about utils module or truncate_string function exists in the official docs
   - The function appears to be an internal utility function

3. **Key Documentation Points**:
   - The docstring clearly states "Maximum length of the result string" for max_length parameter
   - No specific behavior is documented for edge cases like max_length < 3
   - No exceptions or error conditions are documented
   - No specific constraints on max_length values are mentioned (e.g., minimum values)

4. **Implicit Contract from Documentation**:
   - The function should truncate a string to AT MOST max_length characters
   - The phrase "maximum length" strongly implies the result should never exceed max_length
   - There's no mention that ellipsis characters are exempt from the max_length constraint
   - No documentation suggests that max_length has a minimum viable value below which the function might not work as expected

The documentation is minimal but clear in its intent: the function should ensure the result string does not exceed max_length characters.