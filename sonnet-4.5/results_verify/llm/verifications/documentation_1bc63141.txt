## Documentation Analysis for llm.utils.truncate_string

### Function Documentation
Based on examining the source code in `/home/npc/pbt/agentic-pbt/envs/llm_env/lib/python3.13/site-packages/llm/utils.py`, the function `truncate_string` has the following docstring:

```
"""
Truncate a string to a maximum length, with options to normalize whitespace and keep both start and end.

Args:
    text: The string to truncate
    max_length: Maximum length of the result string
    normalize_whitespace: If True, replace all whitespace with a single space
    keep_end: If True, keep both beginning and end of string

Returns:
    Truncated string
"""
```

### Key Contract Points
1. The docstring states that the function returns a "Truncated string"
2. The parameter `max_length` is described as "Maximum length of the result string"
3. This clearly implies that the returned string should never exceed `max_length` characters

### External Documentation
- No specific external documentation found for this utility function
- Web search of llm.datasette.io and GitHub repository shows no public API documentation for `truncate_string`
- The function appears to be an internal utility function not exposed as part of the public API
- Other truncation features exist in LLM (e.g., for prompts, embeddings) but this specific function is not documented externally

### Documentation Interpretation
The docstring and parameter name `max_length` create a clear contract: the returned string should have a length of at most `max_length` characters. This is the fundamental expectation any developer would have when using a function with this signature and documentation.

The documentation does not specify any exceptions or special cases where `max_length` might be violated. It does not state "max_length is a hint" or "max_length applies only when greater than some minimum" - it simply states it as the "Maximum length of the result string."