{
  "type": "result",
  "subtype": "success",
  "is_error": false,
  "duration_ms": 583001,
  "duration_api_ms": 564048,
  "num_turns": 106,
  "result": "## Bug Hunting Results for aiogram.types\n\nSuccessfully discovered **3 categories of validation bugs** in aiogram.types through property-based testing:\n\n### \ud83d\udc1b Bugs Found:\n\n1. **InlineKeyboardButton Missing Validation** (High Severity)\n   - Accepts buttons with NO action fields\n   - Accepts buttons with MULTIPLE action fields\n   - Violates API spec: \"Exactly one optional field must be used\"\n\n2. **Negative Values Accepted** (Medium Severity)\n   - MessageEntity: negative offset/length\n   - PhotoSize: negative width/height\n   - Video/Animation: negative duration\n   - PollOption: negative voter_count\n\n3. **Poll Invalid Configurations** (Medium Severity)\n   - Accepts empty options list\n   - Accepts single option (API requires 2-10)\n   - No validation of voter count consistency\n\n### \ud83d\udcc4 Bug Reports Created:\n- `bug_report_aiogram_types_inline_keyboard_button_2025-08-18_23-08_2z0f.md`\n- `bug_report_aiogram_types_negative_values_2025-08-18_23-08_nj5o.md`\n- `bug_report_aiogram_types_poll_validation_2025-08-18_23-08_6j70.md`\n\n### \u2705 Properties Tested:\n- Round-trip serialization (passed - works correctly)\n- API contract validation (failed - missing validations)\n- Non-negative constraints (failed - accepts invalid values)\n- Structural invariants (failed - accepts invalid structures)\n\nThese bugs could cause runtime failures when sending data to the Telegram Bot API, as the library accepts invalid data that the API will reject.",
  "session_id": "254cfefd-5828-4014-9f58-f53b69c4cb9b",
  "total_cost_usd": 5.6184796,
  "usage": {
    "input_tokens": 748,
    "cache_creation_input_tokens": 63420,
    "cache_read_input_tokens": 1996208,
    "output_tokens": 18623,
    "server_tool_use": {
      "web_search_requests": 0
    },
    "service_tier": "standard"
  },
  "permission_denials": [
    {
      "tool_name": "LS",
      "tool_use_id": "toolu_01F4tJJsXftA3VpptFAgchqF",
      "tool_input": {
        "path": "/root/.local/lib/python3.13/site-packages/aiogram/types"
      }
    },
    {
      "tool_name": "Read",
      "tool_use_id": "toolu_01Drj3qc5PXoDkYDyfGhpeAp",
      "tool_input": {
        "file_path": "/root/.local/lib/python3.13/site-packages/aiogram/types/inline_keyboard_markup.py"
      }
    }
  ],
  "call_id": "3e603f11",
  "module": "aiogram.types",
  "timestamp": "2025-08-18T23:10:41.579664"
}